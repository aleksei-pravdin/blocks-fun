<template>
  <div class="flex-shrink-0 relative">
    <svg
      width="65"
      height="78"
      viewBox="0 0 65 78"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      class="bet-status-icon"
      :class="{ 'animated': isAnimated, 'color-visible': showColorAndSmile }"
      :style="{ '--status-color': statusColor }"
    >
      <!-- Base paths (same for both) -->
      <path
        d="M25.3695 11.5831L23.9389 10.2513C23.7523 10.0793 23.5474 9.99514 23.3389 9.99148L10.0391 9.75C10.244 9.75366 10.4525 9.83781 10.6391 10.0098L12.0697 11.3416C12.2563 11.5136 12.4612 11.5977 12.6698 11.6014L25.9696 11.8428C25.7647 11.8392 25.5561 11.755 25.3695 11.5831Z"
        fill="#EBE9E9"
        class="colored-stroke"
        :style="{ stroke: showColorAndSmile ? statusColor : '#9497A4' }"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M33.1376 4.35236L31.707 3.01688C31.5241 2.84492 31.3155 2.76077 31.1143 2.75711L17.8145 2.51562C18.0193 2.51928 18.2242 2.60344 18.4072 2.7754L19.8378 4.11087C20.0207 4.28284 20.2293 4.36699 20.4342 4.37065L33.734 4.61213C33.5291 4.61213 33.3242 4.52432 33.1376 4.35236Z"
        fill="#EBE9E9"
        class="colored-stroke"
        :style="{ stroke: showColorAndSmile ? statusColor : '#9497A4' }"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M35.5521 71.9789L22.2522 71.7374C21.8498 71.7301 21.451 72.0338 21.2204 72.5826L20.313 74.7596C20.0825 75.3121 19.6837 75.6121 19.2812 75.6048L32.5811 75.8463C32.9836 75.8536 33.3824 75.5499 33.6129 75.0011L34.5203 72.8241C34.7508 72.2716 35.1496 71.9716 35.5521 71.9789Z"
        class="colored-fill"
        :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
      />
      <path
        d="M44.5667 73.1498L31.2669 72.9083C30.8644 72.901 30.4656 73.2047 30.2351 73.7535L29.3277 75.9305C29.0972 76.483 28.6984 76.783 28.2959 76.7757L41.5957 77.0172C41.9982 77.0245 42.397 76.7208 42.6275 76.172L43.5349 73.995C43.7654 73.4425 44.1642 73.1425 44.5667 73.1498Z"
        class="colored-fill"
        :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
      />
      <path
        d="M42.1526 5.52723L37.2937 1.00126C37.1108 0.829295 36.9022 0.745141 36.6973 0.741482L23.3975 0.5C23.6024 0.503659 23.8073 0.587812 23.9939 0.759777L28.8528 5.28574C29.0357 5.45771 29.2406 5.54186 29.4455 5.54552L42.7453 5.787C42.5404 5.78334 42.3355 5.69919 42.1526 5.52723Z"
        fill="#EBE9E9"
        class="colored-stroke"
        :style="{ stroke: showColorAndSmile ? statusColor : '#9497A4' }"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M52.3309 65.9193L39.031 65.6779C38.6285 65.6705 38.2297 65.9742 37.9992 66.5231L34.9222 73.9102C34.6916 74.4664 34.2892 74.77 33.8867 74.7627L47.1865 75.0042C47.589 75.0115 47.9878 74.7078 48.222 74.1517L51.2991 66.7645C51.5296 66.2121 51.9284 65.912 52.3309 65.9193Z"
        class="colored-fill"
        :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
      />
      <path
        d="M49.7372 46.4331C50.286 46.9417 50.447 48.043 50.103 48.8736L42.6866 66.6811C42.339 67.5189 41.6073 67.7824 41.0584 67.2738L39.6278 65.9383C39.079 65.4298 38.3473 65.6932 38.0033 66.5237L34.9262 73.9109C34.5787 74.7488 33.8432 75.0122 33.2981 74.5036L31.8675 73.1682C31.3186 72.6559 30.5832 72.9194 30.2393 73.7536L29.3319 75.9306C28.9843 76.7648 28.2526 77.0282 27.7074 76.516L22.8521 71.9937C22.3033 71.4851 21.5715 71.7486 21.224 72.5791L20.3166 74.7561C19.969 75.5867 19.2372 75.8538 18.6884 75.3415L6.9838 64.4382C6.43497 63.9296 6.27398 62.8283 6.61791 61.9978L7.52532 59.8208C7.8729 58.9902 7.70826 57.8889 7.15943 57.3803L2.3005 52.8544C1.75168 52.3458 1.59069 51.2445 1.93462 50.4139L2.842 48.2369C3.18959 47.4064 3.02494 46.3051 2.47612 45.7965L1.04553 44.461C0.496705 43.9524 0.335721 42.8511 0.683309 42.0133L3.76037 34.6261C4.10796 33.7956 3.94331 32.6942 3.39449 32.182L1.9639 30.8502C1.41507 30.338 1.25043 29.2367 1.59802 28.4024L9.01444 10.5949C9.36203 9.76439 10.0938 9.49729 10.6426 10.0095L12.0732 11.3413C12.6221 11.8536 13.3575 11.5901 13.7014 10.7559L16.7785 3.36876C17.1261 2.53089 17.8578 2.26746 18.4067 2.77603L19.8372 4.1115C20.3861 4.62008 21.1178 4.35664 21.4654 3.52609L22.3728 1.34909C22.7204 0.518538 23.4522 0.251443 23.9973 0.763679L28.8563 5.28965C29.4051 5.79822 30.1369 5.53479 30.4844 4.69692L31.3882 2.52357C31.7358 1.6857 32.4675 1.42227 33.0163 1.93084L44.7209 12.8341C45.2697 13.3464 45.4344 14.4477 45.0868 15.2819L44.1831 17.4552C43.8355 18.2931 44.0001 19.3908 44.5453 19.903L49.4006 24.4253C49.9494 24.9339 50.1104 26.0352 49.7665 26.8657L48.8591 29.0427C48.5115 29.8733 48.6761 30.9746 49.2286 31.4868L50.6592 32.8223C51.208 33.3309 51.369 34.4322 51.0214 35.2701L47.9444 42.6572C47.5968 43.4878 47.7614 44.5891 48.3103 45.0977L49.7408 46.4331H49.7372Z"
        fill="#EBE9E9"
        class="colored-stroke"
        :style="{ stroke: showColorAndSmile ? statusColor : '#9497A4' }"
        stroke-linecap="round"
        stroke-linejoin="round"
      />

      <!-- Eyes - Success -->
      <template v-if="status === 'success'">
        <path
          d="M27.9376 18.8931C28.4864 19.4017 28.6474 20.503 28.3035 21.3335L26.7667 25.0253L24.5971 30.2318L23.0604 33.9235C22.7128 34.7614 21.981 35.0249 21.4322 34.5163L20.0016 33.1808C19.4528 32.6722 19.2918 31.5709 19.6394 30.7331L21.1761 27.0413L23.3458 21.8348L24.8825 18.143C25.2301 17.3125 25.9618 17.0454 26.5106 17.5576L27.9412 18.8931H27.9376Z"
          class="colored-fill"
          :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
        />
        <path
          d="M38.2087 28.4646C38.7575 28.9769 38.9222 30.0782 38.5783 30.9087L37.0416 34.6005L34.8719 39.807L33.3352 43.4987C32.9876 44.3366 32.2558 44.6001 31.7033 44.0878L30.2727 42.756C29.7239 42.2438 29.5593 41.1425 29.9069 40.3082L31.4436 36.6165L33.6132 31.41L35.15 27.7182C35.4975 26.8877 36.2293 26.6206 36.7781 27.1328L38.2087 28.4646Z"
          class="colored-fill"
          :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
        />
      </template>

      <!-- Eyes - Failure -->
      <template v-else>
        <path
          d="M27.6202 18.5757C28.169 19.0843 28.33 20.1856 27.9861 21.0162L26.4494 24.7079L24.2797 29.9144L22.743 33.6062C22.3954 34.444 21.6636 34.7075 21.1148 34.1989L19.6842 32.8634C19.1354 32.3548 18.9744 31.2535 19.322 30.4157L20.8587 26.7239L23.0284 21.5174L24.5651 17.8257C24.9127 16.9951 25.6444 16.728 26.1932 17.2402L27.6239 18.5757H27.6202Z"
          class="colored-fill"
          :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
        />
        <path
          d="M37.8913 28.1472C38.4402 28.6595 38.6048 29.7608 38.2609 30.5913L36.7242 34.2831L34.5545 39.4896L33.0178 43.1814C32.6702 44.0192 31.9384 44.2827 31.3859 43.7704L29.9554 42.4386C29.4065 41.9264 29.2419 40.8251 29.5895 39.9909L31.1262 36.2991L33.2959 31.0926L34.8326 27.4008C35.1802 26.5703 35.9119 26.3032 36.4607 26.8154L37.8913 28.1472Z"
          class="colored-fill"
          :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
        />
      </template>

      <!-- Smile - Success (upward) -->
      <template v-if="status === 'success'">
        <path
          d="M15.8343 36.5396C16.3831 37.0482 16.5441 38.1495 16.1965 38.9874L14.6598 42.6791L12.234 40.418C11.6852 39.9094 11.5242 38.8081 11.8718 37.9702L12.7755 35.7969C13.1231 34.959 13.8549 34.6956 14.4037 35.2041L15.8343 36.5396Z"
          class="colored-fill smile-part-success"
          :class="{ 'visible': showColorAndSmile }"
          :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
        />
        <path
          d="M28.3586 55.4409L26.8219 59.1327C26.4743 59.9633 25.7425 60.2303 25.1937 59.7181L22.7679 57.457L19.3433 54.2665L15.9186 51.076L13.4928 48.8148C12.944 48.3062 12.783 47.2049 13.1269 46.3744L14.6636 42.6826L18.0883 45.8731L21.5129 49.0636L24.9376 52.2541L28.3622 55.4446L28.3586 55.4409Z"
          class="colored-fill"
          :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
        />
        <path
          d="M32.9578 52.492C33.5066 53.0006 33.6676 54.1019 33.32 54.9398L32.4163 57.1131C32.0687 57.951 31.3369 58.2144 30.7881 57.7058L28.3623 55.4447L29.899 51.7529C30.2466 50.9151 30.9784 50.6516 31.5272 51.1602L32.9578 52.4957V52.492Z"
          class="colored-fill smile-part-success"
          :class="{ 'visible': showColorAndSmile }"
          :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
        />
      </template>

      <!-- Smile - Failure (downward) -->
      <template v-else>
        <path
          d="M24.4372 62.4057C23.8884 61.8971 23.7274 60.7958 24.075 59.9579L25.6117 56.2662L28.0375 58.5273C28.5863 59.0359 28.7473 60.1372 28.3997 60.9751L27.496 63.1484C27.1484 63.9863 26.4166 64.2498 25.8678 63.7412L24.4372 62.4057Z"
          class="colored-fill smile-part-failure"
          :class="{ 'visible': showColorAndSmile }"
          :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
        />
        <path
          d="M11.9129 43.5044L13.4496 39.8126C13.7972 38.9821 14.5289 38.715 15.0778 39.2272L17.5036 41.4884L20.9282 44.6789L24.3529 47.8693L26.7787 50.1305C27.3275 50.6391 27.4885 51.7404 27.1446 52.5709L25.6079 56.2627L22.1832 53.0722L18.7585 49.8817L15.3339 46.6912L11.9092 43.5007L11.9129 43.5044Z"
          class="colored-fill"
          :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
        />
        <path
          d="M7.31467 46.4533C6.76585 45.9447 6.60484 44.8434 6.95243 44.0056L7.85617 41.8322C8.20376 40.9943 8.93553 40.7309 9.48435 41.2395L11.9102 43.5006L10.3734 47.1924C10.0259 48.0303 9.29409 48.2937 8.74526 47.7851L7.31467 46.4496L7.31467 46.4533Z"
          class="colored-fill smile-part-failure"
          :class="{ 'visible': showColorAndSmile }"
          :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
        />
      </template>
      
      <!-- Bottom parts (same for both) -->
      <path
        d="M63.4031 49.1149C63.7507 48.2843 63.5861 47.183 63.0372 46.6744L61.6066 45.339C61.0578 44.8304 60.8968 43.7291 61.2407 42.8985L64.3178 35.5114C64.6654 34.6735 64.5007 33.5759 63.9556 33.0636L62.525 31.7281C61.9762 31.2159 61.8115 30.1146 62.1554 29.284L63.0628 27.107C63.4104 26.2765 63.2458 25.1752 62.6969 24.6666L57.8417 20.1443C57.2929 19.6357 57.1319 18.5344 57.4795 17.6966L58.3868 15.5232C58.7344 14.6853 58.5698 13.5877 58.021 13.0755L46.3164 2.17216C46.1334 2.00019 45.9249 1.91604 45.7236 1.91238L32.4238 1.6709C32.6287 1.67456 32.8336 1.75871 33.0166 1.93067L44.7211 12.834C45.27 13.3462 45.4346 14.4475 45.087 15.2817L44.1796 17.4551C43.832 18.2929 43.9967 19.3906 44.5419 19.9028L49.3971 24.4251C49.9459 24.9337 50.1069 26.035 49.763 26.8656L48.8556 29.0426C48.508 29.8731 48.6727 30.9744 49.2252 31.4867L50.6557 32.8221C51.2046 33.3307 51.3655 34.432 51.018 35.2699L47.9409 42.6571C47.5933 43.4876 47.758 44.5889 48.3068 45.0975L49.7374 46.433C50.2862 46.9415 50.4472 48.0428 50.1033 48.8734L42.6868 66.6809C42.4563 67.237 42.0538 67.5407 41.6514 67.5334L54.9512 67.7749C55.3537 67.7822 55.7525 67.4785 55.9867 66.926L63.4031 49.1185V49.1149Z"
        fill="#EBE9E9"
        class="colored-stroke"
        :style="{ stroke: showColorAndSmile ? statusColor : '#9497A4' }"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M41.6514 67.5331C42.0538 67.5404 42.4526 67.2367 42.6868 66.6806L50.1032 48.873L63.4031 49.1145L55.9867 66.922C55.7562 67.4782 55.3573 67.7782 54.9512 67.7709L41.6514 67.5294V67.5331Z"
        class="colored-fill"
        :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
      />
      <path
        d="M57.8454 20.1438C57.2966 19.6353 57.1356 18.5339 57.4832 17.6961L58.3906 15.5227L45.0908 15.2812L44.1834 17.4546C43.8358 18.2925 44.0004 19.3901 44.5456 19.9023L57.8454 20.1438Z"
        class="colored-fill"
        :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
      />
      <path
        d="M62.5243 31.7317C61.9755 31.2195 61.8108 30.1182 62.1548 29.2876L63.0621 27.1106L49.7623 26.8691L48.8549 29.0461C48.5073 29.8767 48.672 30.978 49.2245 31.4902L62.5243 31.7317Z"
        class="colored-fill"
        :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
      />
      <path
        d="M61.6067 45.3386C61.0579 44.83 60.8969 43.7287 61.2409 42.8982L64.3179 35.511L51.0181 35.2695L47.941 42.6567C47.5934 43.4873 47.7581 44.5886 48.3069 45.0971L61.6067 45.3386Z"
        class="colored-fill"
        :style="{ fill: showColorAndSmile ? statusColor : '#9497A4' }"
      />
    </svg>
  </div>
</template>

<script setup lang="ts">
interface Props {
  status: 'success' | 'failure';
}

const props = defineProps<Props>();

const isAnimated = ref(false);
const showColorAndSmile = ref(false);

const statusColor = computed(() => {
  return props.status === 'success' ? '#991DFF' : '#FF4B01';
});

onMounted(() => {
  // First: icon appears (gray, no smile)
  setTimeout(() => {
    isAnimated.value = true;
  }, 100);
  
  // Second: after pause, show color and smile
  setTimeout(() => {
    showColorAndSmile.value = true;
  }, 1500); // 100ms (delay) + 600ms (appear) + 800ms (pause) = 1500ms
});
</script>

<style scoped>
.bet-status-icon {
  opacity: 0;
  transform: translateY(50px) scale(0.6) rotate(-5deg);
  transition: opacity 0.8s cubic-bezier(0.25, 1.75, 0.5, 1), transform 0.8s cubic-bezier(0.25, 1.75, 0.5, 1);
}

.bet-status-icon.animated {
  opacity: 1;
  transform: translateY(0) scale(1) rotate(0deg);
}

/* Transition for colored fills and strokes */
.colored-fill,
.colored-stroke {
  transition: fill 0.8s ease-out, stroke 0.8s ease-out;
}

/* Hide smile parts initially - only opacity, no transform */
.smile-part {
  opacity: 0;
  transition: opacity 0.7s ease-out;
}

.smile-part.visible {
  opacity: 1;
}

/* Success smile - just fade in, no scale animation */
  .smile-part-success {
    opacity: 0;
    transition: opacity 0.7s ease-out;
  }

  .smile-part-success.visible {
    opacity: 1;
  }
  .smile-part-failure {
    opacity: 0;
    transition: opacity 0.7s ease-out;
  }

  .smile-part-failure.visible {
    opacity: 1;
  }
</style>
